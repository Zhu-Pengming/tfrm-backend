<view class="import-container">
  <view class="header-section">
    <view class="header-title">æ™ºèƒ½å¯¼å…¥</view>
    <view class="header-subtitle">GetYourGuide æ¶æ„æå–</view>
  </view>

  <view class="mode-switch">
    <view class="mode-item {{mode === 'text' ? 'active' : ''}}" bindtap="switchMode" data-mode="text">
      <text>æ–‡æœ¬è§£æ</text>
    </view>
    <view class="mode-item {{mode === 'file' ? 'active' : ''}}" bindtap="switchMode" data-mode="file">
      <text>æ–‡æ¡£è¯†åˆ«</text>
    </view>
  </view>

  <view class="input-section">
    <view wx:if="{{mode === 'text'}}" class="text-input-area">
    
      <textarea 
        class="input-textarea" 
        placeholder="ç²˜è´´é…’åº—ã€é—¨ç¥¨ã€å¯¼æ¸¸ç­‰èµ„æºä¿¡æ¯ï¼ŒAIå°†è‡ªåŠ¨è§£æ&#10;&#10;ä¾‹å¦‚ï¼š&#10;æ¸…è¿ˆå‡æ—¥é…’åº—&#10;æˆ¿å‹ï¼šå®¶åº­æˆ¿&#10;ä»·æ ¼ï¼š499å…ƒ/æ™š&#10;æˆæœ¬ï¼š350å…ƒ/æ™š"
        value="{{inputText}}"
        bindinput="onInputChange"
        maxlength="5000"
      />
      <view class="char-count">{{inputText.length}}/5000</view>
    </view>

    <view wx:else class="file-input-area">
      <view wx:if="{{selectedFiles.length === 0}}" class="upload-placeholder" bindtap="handleChooseFile">
        <view class="upload-icon">ğŸ“„</view>
        <text class="upload-text">ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡æˆ–æ–‡æ¡£</text>
        <text class="upload-hint">æ”¯æŒ JPGã€PNGã€PDF æ ¼å¼</text>
      </view>
      
      <view wx:else class="file-preview">
        <view wx:for="{{selectedFiles}}" wx:key="index" class="file-item">
          <text class="file-name">{{item.name}}</text>
          <text class="file-remove" bindtap="handleRemoveFile" data-index="{{index}}">Ã—</text>
        </view>
      </view>
    </view>
    
    <button class="btn-parse" bindtap="handleStartParse" disabled="{{loading}}">
      {{loading ? 'åˆ†å±‚æå–ä¸­...' : 'å¼€å§‹ç»“æ„åŒ–å»ºæ¨¡'}}
    </button>
  </view>

  <view class="history-section">
    <view class="history-header">
      <text class="section-title">å¯¼å…¥å†å²</text>
      <view class="refresh-btn" bindtap="handleRefresh">
        <text>ğŸ”„</text>
      </view>
    </view>
    
    <view wx:if="{{taskList.length === 0}}" class="empty-state">
      <view class="empty-icon">ğŸ“‹</view>
      <text class="empty-text">æš‚æ— å¯¼å…¥è®°å½•</text>
    </view>
    
    <view wx:else class="task-list">
      <view 
        wx:for="{{taskList}}" 
        wx:key="id" 
        class="task-card"
      >
        <view class="task-main" bindtap="handleViewTask" data-task-id="{{item.id}}">
          <view class="task-left">
            <view class="task-header">
              <text class="task-id">ä»»åŠ¡ #</text>
              <text class="task-id-value">{{item.id}}</text>
            </view>
            <view class="task-time">{{item.created_at}}</view>
            <view wx:if="{{item.created_sku_id}}" class="task-sku">
              <text class="sku-icon">âœ…</text>
              <text class="sku-text">å·²ç”Ÿæˆ SKU</text>
            </view>
          </view>
          <view class="task-right">
            <view class="task-status status-{{item.status}}">
              {{statusText[item.status]}}
            </view>
          </view>
        </view>
        <view class="task-actions">
          <button 
            class="action-btn btn-detail" 
            catchtap="handleViewTask" 
            data-task-id="{{item.id}}"
          >
            ğŸ‘ï¸ æŸ¥çœ‹è¯¦æƒ…
          </button>
          <button 
            class="action-btn btn-delete" 
            catchtap="handleDeleteTask" 
            data-task-id="{{item.id}}"
          >
            ğŸ—‘ï¸ åˆ é™¤
          </button>
        </view>
      </view>
    </view>
  </view>
</view>
