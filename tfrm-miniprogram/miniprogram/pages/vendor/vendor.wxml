<view class="vendor-container">
  <view class="header-section">
    <view class="header-top">
      <view class="header-title">ä¾›åº”å•†ç®¡ç†</view>
      <view class="header-actions">
        <view class="search-bar">
          <input 
            class="search-input" 
            placeholder="æœç´¢ä¾›åº”å•†..."
            value="{{keyword}}"
            bindinput="onKeywordInput"
            bindconfirm="handleSearch"
          />
          <text class="search-icon">ğŸ”</text>
        </view>
        <button class="btn-add-vendor" bindtap="showAddVendorModal">
          <text class="add-icon">+</text>
        </button>
      </view>
    </view>
  </view>

  <view class="category-filter">
    <scroll-view scroll-x class="category-scroll">
      <view 
        wx:for="{{categories}}" 
        wx:key="value" 
        class="category-item {{selectedCategoryIndex === index ? 'active' : ''}}"
        bindtap="onCategoryChange"
        data-index="{{index}}"
      >
        <view class="category-icon">{{item.icon}}</view>
        <text class="category-label">{{item.label}}</text>
      </view>
    </scroll-view>
  </view>

  <view wx:if="{{loading}}" class="loading-state">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <view wx:elif="{{vendorList.length === 0}}" class="empty-state">
    <view class="empty-icon">ğŸ¢</view>
    <text class="empty-title">æš‚æ— ä¾›åº”å•†</text>
    <text class="empty-text">ç‚¹å‡»å³ä¸Šè§’æ·»åŠ ä¾›åº”å•†</text>
  </view>

  <view wx:else class="vendor-list">
    <view 
      wx:for="{{vendorList}}" 
      wx:key="id" 
      class="vendor-card"
      bindtap="handleViewDetail"
      data-vendor-id="{{item.id}}"
    >
      <view class="card-header">
        <view class="vendor-logo">
          <text class="logo-text">{{item.name.substring(0, 2)}}</text>
        </view>
        <view class="vendor-info">
          <text class="vendor-name">{{item.name}}</text>
          <view class="vendor-contact">
            <text class="contact-name">{{item.contact}}</text>
            <text class="contact-divider">|</text>
            <text class="contact-phone">{{item.phone}}</text>
            <view 
              class="copy-btn" 
              catchtap="handleCopyPhone" 
              data-phone="{{item.phone}}"
            >
              <text class="copy-icon">ğŸ“‹</text>
            </view>
          </view>
        </view>
        <view class="vendor-status {{item.status === 'Active' ? 'active' : 'inactive'}}">
          {{item.status === 'Active' ? 'åˆä½œä¸­' : 'æš‚åœ'}}
        </view>
      </view>

      <view class="card-body">
        <view class="vendor-categories">
          <text 
            wx:for="{{item.category}}" 
            wx:key="*this" 
            wx:for-item="cat" 
            wx:for-index="catIdx"
            class="category-badge"
          >
            {{cat}}
          </text>
        </view>

        <view class="vendor-address" wx:if="{{item.address}}">
          <text class="address-icon">ğŸ“</text>
          <text class="address-text">{{item.address}}</text>
        </view>

        <view class="vendor-rating" wx:if="{{item.rating}}">
          <text class="rating-icon">â­</text>
          <text class="rating-value">{{item.rating}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- æ·»åŠ ä¾›åº”å•†æ¨¡æ€æ¡† -->
  <view wx:if="{{showAddModal}}" class="modal-overlay" bindtap="hideAddModal">
    <view class="modal-content" catchtap="">
      <view class="modal-header">
        <text class="modal-title">æ·»åŠ ä¾›åº”å•†</text>
        <view class="modal-close" bindtap="hideAddModal">âœ•</view>
      </view>

      <scroll-view scroll-y class="modal-body">
        <view class="form-group">
          <text class="form-label">ä¾›åº”å•†åç§° *</text>
          <input 
            class="form-input" 
            placeholder="è¾“å…¥ä¾›åº”å•†åç§°"
            value="{{formData.name}}"
            bindinput="onFormInput"
            data-field="name"
          />
        </view>

        <view class="form-group">
          <text class="form-label">è”ç³»äºº *</text>
          <input 
            class="form-input" 
            placeholder="è¾“å…¥è”ç³»äººåç§°"
            value="{{formData.contact}}"
            bindinput="onFormInput"
            data-field="contact"
          />
        </view>

        <view class="form-group">
          <text class="form-label">ç”µè¯ *</text>
          <input 
            class="form-input" 
            type="number"
            placeholder="è¾“å…¥ç”µè¯å·ç "
            value="{{formData.phone}}"
            bindinput="onFormInput"
            data-field="phone"
          />
        </view>

        <view class="form-group">
          <text class="form-label">é‚®ç®± *</text>
          <input 
            class="form-input" 
            type="text"
            placeholder="è¾“å…¥é‚®ç®±åœ°å€"
            value="{{formData.email}}"
            bindinput="onFormInput"
            data-field="email"
          />
        </view>

        <view class="form-group">
          <text class="form-label">æœåŠ¡ç±»åˆ« *</text>
          <view class="category-grid">
            <view 
              wx:for="{{categories}}" 
              wx:key="value"
              wx:if="{{item.value}}"
              class="category-option {{formData.category.indexOf(item.value) > -1 ? 'selected' : ''}}"
              bindtap="toggleCategory"
              data-category="{{item.value}}"
            >
              <text class="option-icon">{{item.icon}}</text>
              <text class="option-label">{{item.label}}</text>
            </view>
          </view>
        </view>

        <view class="form-group">
          <text class="form-label">åœ°å€</text>
          <input 
            class="form-input" 
            placeholder="è¾“å…¥ä¾›åº”å•†åœ°å€ï¼ˆå¯é€‰ï¼‰"
            value="{{formData.address}}"
            bindinput="onFormInput"
            data-field="address"
          />
        </view>
      </scroll-view>

      <view class="modal-footer">
        <button class="btn-cancel" bindtap="hideAddModal">å–æ¶ˆ</button>
        <button class="btn-submit" bindtap="handleSubmitVendor">æäº¤</button>
      </view>
    </view>
  </view>
</view>
